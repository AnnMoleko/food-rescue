{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Admin\\\\Desktop\\\\food-rescue\\\\food-rescue\\\\frontend\\\\src\\\\pages\\\\Login.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { API_URL, authHeader } from '../api';\nimport { getRole } from '../auth';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Profile() {\n  _s();\n  const role = getRole();\n  const [formData, setFormData] = useState({\n    name: '',\n    city: '',\n    email: '',\n    // Changed from contact_email to email\n    phone: '',\n    address: ''\n  });\n  const [message, setMessage] = useState('');\n  const [existingId, setExistingId] = useState(null);\n  useEffect(() => {\n    const id = role === 'donor' ? localStorage.getItem('donorId') : localStorage.getItem('ngoId');\n    if (id) {\n      setExistingId(id);\n      setMessage(`You already have a ${role} profile (ID: ${id}). You can update it below.`);\n    }\n  }, [role]);\n  const createProfile = async () => {\n    setMessage('');\n    if (!formData.name || !formData.city || !formData.email) {\n      setMessage('Name, City, and Email are required.');\n      return;\n    }\n    const endpoint = role === 'donor' ? 'donors' : 'ngos';\n    const url = existingId ? `${API_URL}/${endpoint}/${existingId}` : `${API_URL}/${endpoint}`;\n    const method = existingId ? 'PUT' : 'POST';\n    try {\n      const res = await fetch(url, {\n        method: method,\n        headers: {\n          'Content-Type': 'application/json',\n          ...authHeader()\n        },\n        body: JSON.stringify(formData) // Now sends email instead of contact_email\n      });\n      const data = await res.json();\n      if (!res.ok) {\n        throw new Error(data.detail || 'Failed to create profile');\n      }\n\n      // Store the ID locally\n      if (role === 'donor') {\n        localStorage.setItem('donorId', data.id);\n      } else {\n        localStorage.setItem('ngoId', data.id);\n      }\n      setExistingId(data.id);\n      setMessage(`Successfully ${existingId ? 'updated' : 'created'} ${role} profile! ID: ${data.id}`);\n    } catch (error) {\n      setMessage(error.message);\n    }\n  };\n  const handleInputChange = e => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex justify-center p-6\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-full max-w-md shadow card bg-base-100\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-body\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"card-title\",\n          children: [\"Create \", role === null || role === void 0 ? void 0 : role.toUpperCase(), \" Profile\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 11\n        }, this), message && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `alert ${message.includes('Successfully') ? 'alert-success' : 'alert-error'}`,\n          children: message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid gap-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"name\",\n            className: \"input input-bordered\",\n            placeholder: \"Name\",\n            value: formData.name,\n            onChange: handleInputChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"email\" // Changed from contact_email to email\n            ,\n            type: \"email\",\n            className: \"input input-bordered\",\n            placeholder: \"Email\",\n            value: formData.email,\n            onChange: handleInputChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"city\",\n            className: \"input input-bordered\",\n            placeholder: \"City\",\n            value: formData.city,\n            onChange: handleInputChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"phone\",\n            className: \"input input-bordered\",\n            placeholder: \"Phone (optional)\",\n            value: formData.phone,\n            onChange: handleInputChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"address\",\n            className: \"input input-bordered\",\n            placeholder: \"Address (optional)\",\n            value: formData.address,\n            onChange: handleInputChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-primary\",\n            onClick: createProfile,\n            children: existingId ? 'Update Profile' : 'Save Profile'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm opacity-70\",\n            children: \"Your profile ID will be stored locally for later use.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 5\n  }, this);\n}\n_s(Profile, \"yHYriYfvUzOnR9CCvz0ePHEuJRA=\");\n_c = Profile;\nvar _c;\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"names":["React","useState","useEffect","API_URL","authHeader","getRole","jsxDEV","_jsxDEV","Profile","_s","role","formData","setFormData","name","city","email","phone","address","message","setMessage","existingId","setExistingId","id","localStorage","getItem","createProfile","endpoint","url","method","res","fetch","headers","body","JSON","stringify","data","json","ok","Error","detail","setItem","error","handleInputChange","e","target","value","className","children","toUpperCase","fileName","_jsxFileName","lineNumber","columnNumber","includes","placeholder","onChange","type","onClick","_c","$RefreshReg$"],"sources":["C:/Users/Admin/Desktop/food-rescue/food-rescue/frontend/src/pages/Login.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { API_URL, authHeader } from '../api';\r\nimport { getRole } from '../auth';\r\n\r\nexport default function Profile() {\r\n  const role = getRole();\r\n  const [formData, setFormData] = useState({\r\n    name: '',\r\n    city: '',\r\n    email: '', // Changed from contact_email to email\r\n    phone: '',\r\n    address: ''\r\n  });\r\n  const [message, setMessage] = useState('');\r\n  const [existingId, setExistingId] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const id = role === 'donor' ? localStorage.getItem('donorId') : localStorage.getItem('ngoId');\r\n    if (id) {\r\n      setExistingId(id);\r\n      setMessage(`You already have a ${role} profile (ID: ${id}). You can update it below.`);\r\n    }\r\n  }, [role]);\r\n\r\n  const createProfile = async () => {\r\n    setMessage('');\r\n    if (!formData.name || !formData.city || !formData.email) {\r\n      setMessage('Name, City, and Email are required.');\r\n      return;\r\n    }\r\n\r\n    const endpoint = role === 'donor' ? 'donors' : 'ngos';\r\n    const url = existingId ? `${API_URL}/${endpoint}/${existingId}` : `${API_URL}/${endpoint}`;\r\n    const method = existingId ? 'PUT' : 'POST';\r\n\r\n    try {\r\n      const res = await fetch(url, {\r\n        method: method,\r\n        headers: { \r\n          'Content-Type': 'application/json', \r\n          ...authHeader() \r\n        },\r\n        body: JSON.stringify(formData) // Now sends email instead of contact_email\r\n      });\r\n      \r\n      const data = await res.json();\r\n      \r\n      if (!res.ok) {\r\n        throw new Error(data.detail || 'Failed to create profile');\r\n      }\r\n\r\n      // Store the ID locally\r\n      if (role === 'donor') {\r\n        localStorage.setItem('donorId', data.id);\r\n      } else {\r\n        localStorage.setItem('ngoId', data.id);\r\n      }\r\n      \r\n      setExistingId(data.id);\r\n      setMessage(`Successfully ${existingId ? 'updated' : 'created'} ${role} profile! ID: ${data.id}`);\r\n      \r\n    } catch (error) {\r\n      setMessage(error.message);\r\n    }\r\n  };\r\n\r\n  const handleInputChange = (e) => {\r\n    setFormData({\r\n      ...formData,\r\n      [e.target.name]: e.target.value\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex justify-center p-6\">\r\n      <div className=\"w-full max-w-md shadow card bg-base-100\">\r\n        <div className=\"card-body\">\r\n          <h2 className=\"card-title\">Create {role?.toUpperCase()} Profile</h2>\r\n          {message && (\r\n            <div className={`alert ${message.includes('Successfully') ? 'alert-success' : 'alert-error'}`}>\r\n              {message}\r\n            </div>\r\n          )}\r\n          <div className=\"grid gap-3\">\r\n            <input \r\n              name=\"name\"\r\n              className=\"input input-bordered\" \r\n              placeholder=\"Name\" \r\n              value={formData.name} \r\n              onChange={handleInputChange} \r\n            />\r\n            <input \r\n              name=\"email\" // Changed from contact_email to email\r\n              type=\"email\"\r\n              className=\"input input-bordered\" \r\n              placeholder=\"Email\" \r\n              value={formData.email} \r\n              onChange={handleInputChange} \r\n            />\r\n            <input \r\n              name=\"city\"\r\n              className=\"input input-bordered\" \r\n              placeholder=\"City\" \r\n              value={formData.city} \r\n              onChange={handleInputChange} \r\n            />\r\n            <input \r\n              name=\"phone\"\r\n              className=\"input input-bordered\" \r\n              placeholder=\"Phone (optional)\" \r\n              value={formData.phone} \r\n              onChange={handleInputChange} \r\n            />\r\n            <input \r\n              name=\"address\"\r\n              className=\"input input-bordered\" \r\n              placeholder=\"Address (optional)\" \r\n              value={formData.address} \r\n              onChange={handleInputChange} \r\n            />\r\n            <button className=\"btn btn-primary\" onClick={createProfile}>\r\n              {existingId ? 'Update Profile' : 'Save Profile'}\r\n            </button>\r\n            <p className=\"text-sm opacity-70\">Your profile ID will be stored locally for later use.</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}