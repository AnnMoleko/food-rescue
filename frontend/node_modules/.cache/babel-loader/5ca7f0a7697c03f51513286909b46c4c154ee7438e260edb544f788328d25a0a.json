{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Admin\\\\Desktop\\\\food-rescue\\\\food-rescue\\\\frontend\\\\src\\\\pages\\\\Profile.jsx\",\n  _s = $RefreshSig$();\n// Profile.jsx\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { authFetch, API_URL } from '../api';\nimport { getRole, isAuthenticated } from '../auth';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Profile() {\n  _s();\n  const role = getRole();\n  const navigate = useNavigate();\n  const [formData, setFormData] = useState({\n    name: '',\n    city: '',\n    email: '',\n    phone: '',\n    address: ''\n  });\n  const [message, setMessage] = useState('');\n  const [existingId, setExistingId] = useState(null);\n  const [loading, setLoading] = useState(false);\n  useEffect(() => {\n    // Redirect to login if not authenticated\n    if (!isAuthenticated()) {\n      navigate('/login');\n      return;\n    }\n    const id = role === 'donor' ? localStorage.getItem('donorId') : localStorage.getItem('ngoId');\n    if (id) {\n      setExistingId(id);\n      setMessage(`You already have a ${role} profile (ID: ${id}). You can update it below.`);\n    }\n  }, [role, navigate]);\n  const createProfile = async () => {\n    setLoading(true);\n    setMessage('');\n    if (!formData.name || !formData.city || !formData.email) {\n      setMessage('Name, City, and Email are required.');\n      setLoading(false);\n      return;\n    }\n    try {\n      const endpoint = role === 'donor' ? 'donors' : 'ngos';\n      const url = existingId ? `/${endpoint}/${existingId}` : `/${endpoint}`;\n      const method = existingId ? 'PUT' : 'POST';\n      const data = await authFetch(url, {\n        method: method,\n        body: JSON.stringify(formData)\n      });\n\n      // Store the ID locally\n      if (role === 'donor') {\n        localStorage.setItem('donorId', data.id);\n      } else {\n        localStorage.setItem('ngoId', data.id);\n      }\n      setExistingId(data.id);\n      setMessage(`Successfully ${existingId ? 'updated' : 'created'} ${role} profile! ID: ${data.id}`);\n    } catch (error) {\n      setMessage(error.message || 'Failed to create profile');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleInputChange = e => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex justify-center p-6\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-full max-w-md shadow card bg-base-100\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-body\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"card-title\",\n          children: [\"Create \", role === null || role === void 0 ? void 0 : role.toUpperCase(), \" Profile\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }, this), message && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `alert ${message.includes('Successfully') ? 'alert-success' : 'alert-error'}`,\n          children: message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid gap-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"name\",\n            className: \"input input-bordered\",\n            placeholder: \"Name\",\n            value: formData.name,\n            onChange: handleInputChange,\n            disabled: loading\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"email\",\n            type: \"email\",\n            className: \"input input-bordered\",\n            placeholder: \"Email\",\n            value: formData.email,\n            onChange: handleInputChange,\n            disabled: loading\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"city\",\n            className: \"input input-bordered\",\n            placeholder: \"City\",\n            value: formData.city,\n            onChange: handleInputChange,\n            disabled: loading\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"phone\",\n            className: \"input input-bordered\",\n            placeholder: \"Phone (optional)\",\n            value: formData.phone,\n            onChange: handleInputChange,\n            disabled: loading\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"address\",\n            className: \"input input-bordered\",\n            placeholder: \"Address (optional)\",\n            value: formData.address,\n            onChange: handleInputChange,\n            disabled: loading\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-primary\",\n            onClick: createProfile,\n            disabled: loading,\n            children: loading ? 'Processing...' : existingId ? 'Update Profile' : 'Save Profile'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm opacity-70\",\n            children: \"Your profile ID will be stored locally for later use.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 5\n  }, this);\n}\n_s(Profile, \"zAlVxNU2g1XrjSQAtHwRKIDVsXM=\", false, function () {\n  return [useNavigate];\n});\n_c = Profile;\nvar _c;\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","authFetch","API_URL","getRole","isAuthenticated","jsxDEV","_jsxDEV","Profile","_s","role","navigate","formData","setFormData","name","city","email","phone","address","message","setMessage","existingId","setExistingId","loading","setLoading","id","localStorage","getItem","createProfile","endpoint","url","method","data","body","JSON","stringify","setItem","error","handleInputChange","e","target","value","className","children","toUpperCase","fileName","_jsxFileName","lineNumber","columnNumber","includes","placeholder","onChange","disabled","type","onClick","_c","$RefreshReg$"],"sources":["C:/Users/Admin/Desktop/food-rescue/food-rescue/frontend/src/pages/Profile.jsx"],"sourcesContent":["// Profile.jsx\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { authFetch, API_URL } from '../api';\nimport { getRole, isAuthenticated } from '../auth';\n\nexport default function Profile() {\n  const role = getRole();\n  const navigate = useNavigate();\n  const [formData, setFormData] = useState({\n    name: '',\n    city: '',\n    email: '',\n    phone: '',\n    address: ''\n  });\n  const [message, setMessage] = useState('');\n  const [existingId, setExistingId] = useState(null);\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    // Redirect to login if not authenticated\n    if (!isAuthenticated()) {\n      navigate('/login');\n      return;\n    }\n\n    const id = role === 'donor' ? localStorage.getItem('donorId') : localStorage.getItem('ngoId');\n    if (id) {\n      setExistingId(id);\n      setMessage(`You already have a ${role} profile (ID: ${id}). You can update it below.`);\n    }\n  }, [role, navigate]);\n\n  const createProfile = async () => {\n    setLoading(true);\n    setMessage('');\n    \n    if (!formData.name || !formData.city || !formData.email) {\n      setMessage('Name, City, and Email are required.');\n      setLoading(false);\n      return;\n    }\n\n    try {\n      const endpoint = role === 'donor' ? 'donors' : 'ngos';\n      const url = existingId ? `/${endpoint}/${existingId}` : `/${endpoint}`;\n      const method = existingId ? 'PUT' : 'POST';\n\n      const data = await authFetch(url, {\n        method: method,\n        body: JSON.stringify(formData)\n      });\n\n      // Store the ID locally\n      if (role === 'donor') {\n        localStorage.setItem('donorId', data.id);\n      } else {\n        localStorage.setItem('ngoId', data.id);\n      }\n      \n      setExistingId(data.id);\n      setMessage(`Successfully ${existingId ? 'updated' : 'created'} ${role} profile! ID: ${data.id}`);\n      \n    } catch (error) {\n      setMessage(error.message || 'Failed to create profile');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleInputChange = (e) => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  return (\n    <div className=\"flex justify-center p-6\">\n      <div className=\"w-full max-w-md shadow card bg-base-100\">\n        <div className=\"card-body\">\n          <h2 className=\"card-title\">Create {role?.toUpperCase()} Profile</h2>\n          \n          {message && (\n            <div className={`alert ${message.includes('Successfully') ? 'alert-success' : 'alert-error'}`}>\n              {message}\n            </div>\n          )}\n          \n          <div className=\"grid gap-3\">\n            <input \n              name=\"name\"\n              className=\"input input-bordered\" \n              placeholder=\"Name\" \n              value={formData.name} \n              onChange={handleInputChange} \n              disabled={loading}\n            />\n            <input \n              name=\"email\"\n              type=\"email\"\n              className=\"input input-bordered\" \n              placeholder=\"Email\" \n              value={formData.email} \n              onChange={handleInputChange} \n              disabled={loading}\n            />\n            <input \n              name=\"city\"\n              className=\"input input-bordered\" \n              placeholder=\"City\" \n              value={formData.city} \n              onChange={handleInputChange} \n              disabled={loading}\n            />\n            <input \n              name=\"phone\"\n              className=\"input input-bordered\" \n              placeholder=\"Phone (optional)\" \n              value={formData.phone} \n              onChange={handleInputChange} \n              disabled={loading}\n            />\n            <input \n              name=\"address\"\n              className=\"input input-bordered\" \n              placeholder=\"Address (optional)\" \n              value={formData.address} \n              onChange={handleInputChange} \n              disabled={loading}\n            />\n            \n            <button \n              className=\"btn btn-primary\" \n              onClick={createProfile}\n              disabled={loading}\n            >\n              {loading ? 'Processing...' : (existingId ? 'Update Profile' : 'Save Profile')}\n            </button>\n            \n            <p className=\"text-sm opacity-70\">\n              Your profile ID will be stored locally for later use.\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}