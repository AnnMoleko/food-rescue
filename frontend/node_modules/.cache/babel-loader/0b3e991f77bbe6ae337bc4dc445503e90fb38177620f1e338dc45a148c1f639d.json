{"ast":null,"code":"// api.js\nexport const API_URL = \"http://127.0.0.1:8000/api\";\nexport const authHeader = () => {\n  const token = localStorage.getItem('access_token');\n  if (token) {\n    return {\n      'Authorization': `Bearer ${token}`\n    };\n  }\n  return {};\n};\n\n// Enhanced fetch function with better error handling\nexport const authFetch = async (url, options = {}) => {\n  const token = localStorage.getItem('access_token');\n  const headers = {\n    'Content-Type': 'application/json',\n    ...options.headers\n  };\n  if (token) {\n    headers['Authorization'] = `Bearer ${token}`;\n  }\n  try {\n    const response = await fetch(`${API_URL}${url}`, {\n      ...options,\n      headers\n    });\n    if (response.status === 401) {\n      // Token expired or invalid\n      localStorage.removeItem('access_token');\n      localStorage.removeItem('role');\n      window.location.href = '/login';\n      throw new Error('Authentication failed');\n    }\n    if (!response.ok) {\n      const errorData = await response.json().catch(() => ({}));\n      throw new Error(errorData.detail || `HTTP error! status: ${response.status}`);\n    }\n    return await response.json();\n  } catch (error) {\n    console.error('API call failed:', error);\n    throw error;\n  }\n};","map":{"version":3,"names":["API_URL","authHeader","token","localStorage","getItem","authFetch","url","options","headers","response","fetch","status","removeItem","window","location","href","Error","ok","errorData","json","catch","detail","error","console"],"sources":["C:/Users/Admin/Desktop/food-rescue/food-rescue/frontend/src/api.js"],"sourcesContent":["// api.js\nexport const API_URL = \"http://127.0.0.1:8000/api\";\n\nexport const authHeader = () => {\n  const token = localStorage.getItem('access_token');\n  if (token) {\n    return { 'Authorization': `Bearer ${token}` };\n  }\n  return {};\n};\n\n// Enhanced fetch function with better error handling\nexport const authFetch = async (url, options = {}) => {\n  const token = localStorage.getItem('access_token');\n  const headers = {\n    'Content-Type': 'application/json',\n    ...options.headers,\n  };\n\n  if (token) {\n    headers['Authorization'] = `Bearer ${token}`;\n  }\n\n  try {\n    const response = await fetch(`${API_URL}${url}`, {\n      ...options,\n      headers,\n    });\n\n    if (response.status === 401) {\n      // Token expired or invalid\n      localStorage.removeItem('access_token');\n      localStorage.removeItem('role');\n      window.location.href = '/login';\n      throw new Error('Authentication failed');\n    }\n\n    if (!response.ok) {\n      const errorData = await response.json().catch(() => ({}));\n      throw new Error(errorData.detail || `HTTP error! status: ${response.status}`);\n    }\n\n    return await response.json();\n  } catch (error) {\n    console.error('API call failed:', error);\n    throw error;\n  }\n};"],"mappings":"AAAA;AACA,OAAO,MAAMA,OAAO,GAAG,2BAA2B;AAElD,OAAO,MAAMC,UAAU,GAAGA,CAAA,KAAM;EAC9B,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC;EAClD,IAAIF,KAAK,EAAE;IACT,OAAO;MAAE,eAAe,EAAE,UAAUA,KAAK;IAAG,CAAC;EAC/C;EACA,OAAO,CAAC,CAAC;AACX,CAAC;;AAED;AACA,OAAO,MAAMG,SAAS,GAAG,MAAAA,CAAOC,GAAG,EAAEC,OAAO,GAAG,CAAC,CAAC,KAAK;EACpD,MAAML,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC;EAClD,MAAMI,OAAO,GAAG;IACd,cAAc,EAAE,kBAAkB;IAClC,GAAGD,OAAO,CAACC;EACb,CAAC;EAED,IAAIN,KAAK,EAAE;IACTM,OAAO,CAAC,eAAe,CAAC,GAAG,UAAUN,KAAK,EAAE;EAC9C;EAEA,IAAI;IACF,MAAMO,QAAQ,GAAG,MAAMC,KAAK,CAAC,GAAGV,OAAO,GAAGM,GAAG,EAAE,EAAE;MAC/C,GAAGC,OAAO;MACVC;IACF,CAAC,CAAC;IAEF,IAAIC,QAAQ,CAACE,MAAM,KAAK,GAAG,EAAE;MAC3B;MACAR,YAAY,CAACS,UAAU,CAAC,cAAc,CAAC;MACvCT,YAAY,CAACS,UAAU,CAAC,MAAM,CAAC;MAC/BC,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,QAAQ;MAC/B,MAAM,IAAIC,KAAK,CAAC,uBAAuB,CAAC;IAC1C;IAEA,IAAI,CAACP,QAAQ,CAACQ,EAAE,EAAE;MAChB,MAAMC,SAAS,GAAG,MAAMT,QAAQ,CAACU,IAAI,CAAC,CAAC,CAACC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;MACzD,MAAM,IAAIJ,KAAK,CAACE,SAAS,CAACG,MAAM,IAAI,uBAAuBZ,QAAQ,CAACE,MAAM,EAAE,CAAC;IAC/E;IAEA,OAAO,MAAMF,QAAQ,CAACU,IAAI,CAAC,CAAC;EAC9B,CAAC,CAAC,OAAOG,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,kBAAkB,EAAEA,KAAK,CAAC;IACxC,MAAMA,KAAK;EACb;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}